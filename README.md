# CopyToAsk (macOS)

Menu bar macOS app that explains selected text using OpenAI.

## Features

- Global hotkey to explain selected text
- Popover window anchored near selection (best-effort via Accessibility)
- Language toggle (Chinese/English); English is generated by translating the Chinese answer
- Configurable prompts
- History stored as JSONL, grouped by day
- One-click summary: summarize one or multiple JSONL files into a Markdown note
- Retention policy: auto-delete history older than N days

## Build & Run

Prerequisites:

- macOS 13+
- Xcode Command Line Tools (for `swiftc`)

Build:

```bash
./build.sh
```

Run:

```bash
open build/CopyToAsk.app
```

## Permissions

- Accessibility: required to read selected text and/or selection bounds.
- The fallback path simulates Cmd+C and reads the pasteboard; depending on macOS version, this can require additional privacy permissions.

## OpenAI API Key

- Preferred: set `OPENAI_API_KEY` in your environment.
- Or open `Settings…` in the menu bar app and save the key (validated before saving).

## Data Storage

- History JSONL: `~/Library/Application Support/CopyToAsk/History/YYYY-MM-DD.jsonl`
- Summaries: `~/Library/Application Support/CopyToAsk/History/Summaries/*.md`

## Notes

This is a prototype-style implementation built with AppKit + Swift and a simple `swiftc` build script.

---

## 中文快速说明

- 选中文本后按热键即可解释
- `Settings…` 里可配置模型档位、Prompt、历史保留与多文件总结
